<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>flessi</title>
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/jobs.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../scripts/main.js"></script>
    <script src="../scripts/jobs.js"></script>
  </head>
  <body onload="fetchJobs()">
    <header>
      <div class="header-brand" onclick="location.href='./home.html'">
        <img
          class="header-logo"
          src="../assets/logo-small.svg"
          alt="flessi_logo"
        />
        <img class="header-title" src="../assets/logo-text.svg" alt="flessi" />
      </div>
      <nav class="header-user-actions">
        <ul>
          <li><a href="./login.html">Login</a></li>
          <li><a href="./register.html">Registrarme</a></li>
        </ul>
      </nav>
      <div class="header-user-profile" onclick="location.href='./profile.html'">
        <img
          class="header-logo"
          src="../assets/user-icon.svg"
          alt="user-icon"
        />
      </div>
    </header>

    <main>
      <div class="sidebar-filters">
        <h3>Filtros</h3>
        <select id="category" onchange="handleSelectFilter('category')">
          <option value="" disabled selected>Categoría</option>
          <option>Todos</option>
          <option>Administración</option>
          <option>Atención al Cliente</option>
          <option>Construcción</option>
          <option>Hotelería</option>
          <option>Gastronomía</option>
          <option>Ventas</option>
        </select>
        <select id="location" onchange="handleSelectFilter('location')">
          <option value="" disabled selected>Ubicación</option>
          <option>Todos</option>
          <option>Buenos Aires</option>
          <option>Córdoba</option>
          <option>Rosario</option>
        </select>
        <input
          id="date"
          type="date"
          placeholder="Fecha"
          onchange="handleInputFilter('date')"
        />
        <input
          id="time"
          type="time"
          placeholder="Hora de Entrada"
          onchange="handleInputFilter('time')"
        />
        <input
          id="pay"
          type="number"
          min="1"
          step="any"
          placeholder="Remuneración"
          onchange="handleInputFilter('pay')"
        />
        <button id="reset-filters" onclick="cleanFilters()">
          Limpiar Filtros
        </button>
      </div>

      <div class="job-cards"></div>

      <button class="add-job-button" onclick="openModal('new-job-modal')">
        +
      </button>
    </main>

    <div class="modals">
      <div id="new-job-modal" class="modal">
        <div class="modal-content">
          <div class="modal-title">
            <h2>Publicar Nuevo Trabajo</h2>
            <span class="close" onclick="closeModal('new-job-modal')"
              >&times;</span
            >
          </div>
          <form class="modal-form" onsubmit="handleCreateJob(event)">
            <div class="form-columns">
              <div class="form-column">
                <label for="job-title">Título</label>
                <input type="text" id="job-title" name="job-title" required />

                <label for="job-start-time">Hora de Inicio</label>
                <input
                  type="time"
                  id="job-start-time"
                  name="job-start-time"
                  required
                />

                <label for="job-price">Precio por Hora</label>
                <input
                  type="number"
                  id="job-price"
                  name="job-price"
                  min="1"
                  step="any"
                  required
                />

                <label for="job-city">Ciudad</label>
                <select id="job-city" name="job-city" required>
                  <option>Buenos Aires</option>
                  <option>Córdoba</option>
                  <option>Rosario</option>
                </select>
              </div>
              <div class="form-column">
                <label for="job-category">Categoría</label>
                <select id="job-category" name="job-category" required>
                  <option>Administración</option>
                  <option>Atención al Cliente</option>
                  <option>Construcción</option>
                  <option>Hotelería</option>
                  <option>Gastronomía</option>
                  <option>Ventas</option>
                </select>

                <label for="job-end-time">Hora de Fin</label>
                <input
                  type="time"
                  id="job-end-time"
                  name="job-end-time"
                  required
                />

                <label for="job-total">Precio Total</label>
                <input
                  type="number"
                  id="job-total"
                  name="job-total"
                  min="1"
                  step="any"
                  required
                />

                <label for="job-address">Dirección</label>
                <input
                  type="text"
                  id="job-address"
                  name="job-address"
                  required
                />
              </div>
            </div>

            <label for="job-description">Descripción</label>
            <input
              type="text"
              id="job-description"
              name="job-description"
              required
            />

            <label for="job-requirements">Requerimientos</label>
            <div id="job-requirements"></div>

            <div class="form-columns">
              <input
                type="text"
                id="job-requirement"
                placeholder="Nuevo Requerimiento"
              />
              <button
                type="button"
                class="add-requirement-button"
                onclick="handleAddRequirement()"
              >
                Añadir
              </button>
            </div>

            <button type="submit">Publicar</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
